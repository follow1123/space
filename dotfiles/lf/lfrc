# 基础配置
set icons true 				# 显示图标
set hidden true				# 默认显示隐藏文件
set previewer ~/.config/lf/perviewer.sh	# 设置预览脚本
set cleaner ~/.config/lf/clear_img.sh 	# 清理图片缓存
set ratios '1:3:3'
set info 'size:ctime'
set sortby 'atime'

# 跳转目录命令
cmd z %{{
	result="$(zoxide query --exclude $PWD $@ | sed 's/\\/\\\\/g;s/"/\\"/g')"
	lf -remote "send $id cd \"$result\""
}}

cmd zi ${{
	result="$(zoxide query -i | sed 's/\\/\\\\/g;s/"/\\"/g')"
	lf -remote "send $id cd \"$result\""
}}
# 使用图形界面打开当前文件夹
cmd explorer_open &{{ nemo . }}

cmd fzf_dir ${{ lf -remote "send $id cd '$(fd -t d | fzf)'" }}

cmd edit_lf_config $nvim -u $NVIM_CONF_HOME/init_min.lua $HOME/.config/lf/lfrc
cmd edit_hosts ${{ sudo nvim -u $NVIM_CONF_HOME/init_min.lua /etc/hosts }}
cmd lazygit $lazygit

# 文件复制操作
cmd copy_abstract_path &{{ echo $f | xclip -selection clipboard }}
cmd copy_file_name &{{
	file_name=$(basename $f)
	echo ${file_name%.*} | xclip -selection clipboard
}}
cmd copy_file_full_name &{{ echo $(basename $f) | xclip -selection clipboard }}
cmd copy_file_directory &{{ echo $PWD | xclip -selection clipboard }}

# 禁用快捷键
map y
map d
map f
map a
map r
map '"'
map e

map i $nvim -u $NVIM_CONF_HOME/init_min.lua $f

map e1 edit_lf_config
map e9 edit_hosts

# 文件操作
map yy copy					# 复制
map yn copy_file_name		# 复制文件名
map yN copy_file_full_name	# 复制文件名,包含扩展
map yp copy_abstract_path	# 复制文件绝对路径
map yd copy_file_directory	# 复制当前文件夹路径

map dd cut					# 剪切
map X delete				# 删除	
map <f-2> rename 			# 重命名
map a push $touch<space>	# 新建文件
map A push $mkdir<space>	# 新建文件夹

map K calcdirsize			# 计算文件夹大小

# 文件跳转
map gc cd ~/space/code		# 代码
map gC cd ~/space/dotfiles	# 配置文件
map gd cd ~/Downloads		# 下载
map ge cd ~/space/env		# 环境目录

map fd fzf_dir				# 查找文件并跳转

map <a-6> lazygit			# 打开lazygit终端
